/* Default (light) variables */
:root {
  --bg: #ffffff;
  --fg: #111827; /* gray-900 */
  --muted: #6b7280; /* gray-500 */
  --accent: #2563eb; /* blue-600 */
}

/* System dark mode when no explicit theme set */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --bg: #0b1020;
    --fg: #e5e7eb;
    --muted: #9ca3af;
    --accent: #60a5fa;
  }
}

/* Explicit overrides via data-theme */
:root[data-theme="light"] {
  --bg: #ffffff;
  --fg: #111827;
  --muted: #6b7280;
  --accent: #2563eb;
}
:root[data-theme="dark"] {
  --bg: #0b1020;
  --fg: #e5e7eb;
  --muted: #9ca3af;
  --accent: #60a5fa;
}
html { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans JP, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
body { margin: 0; background: var(--bg); color: var(--fg); line-height: 1.7; }
a { color: var(--accent); text-decoration: none; }
a:hover { text-decoration: underline; }
img { max-width: 100%; height: auto; }
main { max-width: 960px; margin: 0 auto; padding: 2rem 1rem; }
header, footer { max-width: 960px; margin: 0 auto; padding: 1rem; }
code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
.container { max-width: 960px; margin: 0 auto; padding: 0 1rem; }
.post-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem; }
.tag { display:inline-block; padding: 0.1rem 0.5rem; border: 1px solid var(--muted); border-radius: 9999px; font-size: 0.85rem; color: var(--muted); }
.katex-display { overflow-x: auto; }

/* Layout helpers */
.nav { display:flex; gap:1rem; align-items:center; justify-content:space-between; }
.nav-left { display:flex; gap:1rem; align-items:center; }
.nav-right { display:flex; gap:0.75rem; }
.muted-text { color: var(--muted); }

/* Theme toggle button */
.theme-toggle {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  border: 1px solid var(--muted);
  background: transparent;
  color: var(--fg);
  border-radius: 9999px;
  padding: 0.25rem 0.6rem;
  cursor: pointer;
  font: inherit;
}
.theme-toggle:hover {
  text-decoration: none;
  border-color: var(--fg);
}

/* Headings scale */
h1 { font-size: clamp(1.9rem, 3vw, 2.4rem); line-height: 1.2; margin: 1.5rem 0 0.75rem; font-weight: 700; }
h2 { font-size: clamp(1.6rem, 2.5vw, 2.0rem); line-height: 1.3; margin: 1.25rem 0 0.6rem; font-weight: 700; }
h3 { font-size: clamp(1.3rem, 2vw, 1.5rem); line-height: 1.35; margin: 1rem 0 0.5rem; font-weight: 600; }
h4 { font-size: 1.1rem; line-height: 1.4; margin: 0.75rem 0 0.4rem; font-weight: 600; }
article h1 { margin-top: 0; }
