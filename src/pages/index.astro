---
import BaseLayout from '@layouts/BaseLayout.astro';
import PostCard from '@components/PostCard.astro';
import { getCollection } from 'astro:content';

const all = await getCollection('posts');
const posts = all
  .filter((p) => p.data.draft !== true && p.data.lang === 'ja')
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
  .slice(0, 6);
---
<BaseLayout title="Home">
  <section>
    <h1>ğŸš§å·¥äº‹ä¸­ğŸš§</h1>
    <p>ã“ã‚Œã¯è‡ªå·±ç´¹ä»‹ã¨ãƒ–ãƒ­ã‚°ã®ã‚µã‚¤ãƒˆã§ã™ã€‚æœ€æ–°ã®æŠ•ç¨¿ã‚’ã„ãã¤ã‹æ²è¼‰ã—ã¾ã™ã€‚</p>
  </section>
  <section>
    <h2>æœ€æ–°è¨˜äº‹</h2>
    <div class="post-grid">
      {posts.map((p) => {
        const s = p.slug.split('/').pop();
        return (
        <PostCard
          href={`/blog/${s}/`}
          title={p.data.title}
          description={p.data.description}
          date={p.data.date}
          hero={p.data.hero}
          tags={p.data.tags}
        />
        );
      })}
    </div>
    <p style="margin-top:1rem;"><a href="/blog/">ã™ã¹ã¦ã®æŠ•ç¨¿ã‚’è¦‹ã‚‹ â†’</a></p>
  </section>
</BaseLayout>
