---
import BaseLayout from '@layouts/BaseLayout.astro';
import PostCard from '@components/PostCard.astro';
import { getCollection } from 'astro:content';
import { withBase } from '@lib/paths';

const all = await getCollection('posts');
const posts = all
  .filter((p) => p.data.draft !== true && p.data.lang === 'ja')
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
  .slice(0, 6);
---
<BaseLayout title="Home">
  <section>
    <h1>Inuverseのホームページ</h1>
    <p>このページでは、物理学やIT技術関連の記事、旅行記、雑記などをまとめています。</p>
    <p>Inuverseとは僕の好きな動物の犬と宇宙 (universe) を合わせた造語です。</p>
    <p>特に意味はありません</p>
  </section>
  <section>
    <h2>最新記事</h2>
    <div class="post-grid">
      {posts.map((p) => {
        const s = p.slug.split('/').pop();
        return (
        <PostCard
          href={withBase(`blog/${s}/`)}
          title={p.data.title}
          description={p.data.description}
          date={p.data.date}
          hero={p.data.hero}
          tags={p.data.tags}
        />
        );
      })}
    </div>
    <p style="margin-top:1rem;"><a href={withBase('blog/')}>すべての投稿を見る →</a></p>
  </section>
</BaseLayout>
