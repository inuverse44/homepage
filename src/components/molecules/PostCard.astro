---
interface Props {
  href: string;
  title: string;
  description?: string;
  date: string | Date;
  hero?: string;
  tags?: string[];
}
const { href, title, description, date, hero, tags = [] } = Astro.props;
const d = new Date(date);
import { withBase, withBaseIfAbsolute } from '@lib/paths';
import TagChip from '@atoms/TagChip.astro';
---
<article style="border:1px solid #e5e7eb; border-radius:8px; overflow:hidden; background:#fff;">
  <a href={href} style="color:inherit; text-decoration:none; display:block;">
    {hero && <img src={withBaseIfAbsolute(hero)} alt="" loading="lazy" style="width:100%; height:160px; object-fit:cover;" />}
    <div style="padding:0.75rem 1rem;">
      <h3 style="margin:0 0 0.25rem 0;">{title}</h3>
      <p style="margin:0; color:var(--muted); font-size:0.9rem;">
        <time datetime={d.toISOString()}>{d.toLocaleDateString('ja-JP')}</time>
      </p>
      {description && <p style="margin:0.5rem 0 0 0; color:var(--muted);">{description}</p>}
      {tags.length > 0 && (
        <p style="margin:0.5rem 0 0 0; display:flex; gap:0.25rem; flex-wrap:wrap;">
          {tags.map((t) => <TagChip href={withBase(`tags/${t.toLowerCase().replace(/\s+/g,'-')}/`)} label={t} />)}
        </p>
      )}
    </div>
  </a>
</article>
